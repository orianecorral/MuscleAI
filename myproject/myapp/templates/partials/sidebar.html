<!-- Sidebar Desktop -->
<aside class="hidden lg:block fixed top-0 left-0 h-full w-64 bg-gray-900 text-white shadow-lg z-40">
  <div class="p-6 border-b border-gray-700">
    <h2 class="text-2xl font-bold">MuscleAI</h2>
  </div>
  <nav class="p-4 space-y-4">
    <a href="{% url 'profile_show' %}" class="block px-3 py-2 rounded hover:bg-gray-700">👤 Profils</a>
    <a href="{% url 'training_show' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🏋️ Trainings</a>
    <a href="{% url 'show_challenges' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🏆 Challenges</a>
    <a href="{% url 'coach_list' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🧑‍🏫 Coachs</a>
    <a href="{% url 'profile_create' %}" class="block px-3 py-2 rounded hover:bg-gray-700">➕ Nouveau profil</a>
    <a href="{% url 'training_create' %}" class="block px-3 py-2 rounded hover:bg-gray-700">➕ Nouveau training</a>


    <!-- Dropdown Desktop -->
    <div>
      <button id="calcToggle" class="w-full text-left px-3 py-2 rounded hover:bg-gray-700 flex justify-between items-center">
        🧮 Calculatrices
        <span id="calcArrow">▼</span>
      </button>
      <div id="calcMenu" class="mt-2 pl-4 space-y-2 hidden">
        <a href="{% url 'bmi_calculator' %}" class="block px-3 py-2 rounded hover:bg-gray-700">📏 Calcul BMI</a>
        <a href="{% url 'protein_calculator' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🍗 Protéines</a>
        <a href="{% url 'calories_calculator' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🔥 Calories</a>
        <a href="{% url 'weights' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🏋️ Charge % 1RM</a>
      </div>
    </div>
  </nav>
</aside>

<!-- Mobile Sidebar -->
<div id="mobileSidebar" class="hidden fixed inset-0 bg-gray-900 text-white z-40 p-6">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold">Menu</h2>
    <button id="closeBurger" class="text-white text-2xl">✕</button>
  </div>
  <nav class="space-y-4">
    <a href="{% url 'profile_show' %}" class="block px-3 py-2 rounded hover:bg-gray-700">👤 Profils</a>
    <a href="{% url 'training_show' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🏋️ Trainings</a>
    <a href="{% url 'show_challenges' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🏆 Challenges</a>
    <a href="{% url 'coach_list' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🧑‍🏫 Coachs</a>
    <a href="{% url 'profile_create' %}" class="block px-3 py-2 rounded hover:bg-gray-700">➕ Nouveau profil</a>
    <a href="{% url 'training_create' %}" class="block px-3 py-2 rounded hover:bg-gray-700">➕ Nouveau training</a>

    <!-- Dropdown Mobile -->
    <div>
      <button id="calcToggleMobile" class="w-full text-left px-3 py-2 rounded hover:bg-gray-700 flex justify-between items-center">
        🧮 Calculatrices
        <span id="calcArrowMobile">▼</span>
      </button>
      <div id="calcMenuMobile" class="mt-2 pl-4 space-y-2 hidden">
        <a href="{% url 'bmi_calculator' %}" class="block px-3 py-2 rounded hover:bg-gray-700">📏 Calcul BMI</a>
        <a href="{% url 'protein_calculator' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🍗 Protéines</a>
        <a href="{% url 'calories_calculator' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🔥 Calories</a>
        <a href="{% url 'weights' %}" class="block px-3 py-2 rounded hover:bg-gray-700">🏋️ Charge % 1RM</a>

      </div>
    </div>
  </nav>
</div>

<!-- JS toggle for sidebar & dropdowns -->
<script>
  const burger = document.getElementById('burger');
  const mobileSidebar = document.getElementById('mobileSidebar');
  const closeBurger = document.getElementById('closeBurger');

  if (burger && mobileSidebar && closeBurger) {
    burger.onclick = () => mobileSidebar.classList.remove('hidden');
    closeBurger.onclick = () => mobileSidebar.classList.add('hidden');
  }

  // Desktop dropdown
  const calcToggle = document.getElementById('calcToggle');
  const calcMenu = document.getElementById('calcMenu');
  const calcArrow = document.getElementById('calcArrow');

  if (calcToggle && calcMenu && calcArrow) {
    calcToggle.onclick = () => {
      calcMenu.classList.toggle('hidden');
      calcArrow.textContent = calcMenu.classList.contains('hidden') ? '▼' : '▲';
    };
  }

  // Mobile dropdown
  const calcToggleMobile = document.getElementById('calcToggleMobile');
  const calcMenuMobile = document.getElementById('calcMenuMobile');
  const calcArrowMobile = document.getElementById('calcArrowMobile');

  if (calcToggleMobile && calcMenuMobile && calcArrowMobile) {
    calcToggleMobile.onclick = () => {
      calcMenuMobile.classList.toggle('hidden');
      calcArrowMobile.textContent = calcMenuMobile.classList.contains('hidden') ? '▼' : '▲';
    };
  }
</script>
